/**
 * @license ev-em.min.js v3.2.9
 * (c) 2015-2017 Evolok, Inc. http://www.evolok.com/
 *
 * License: MIT
 */
window.EV=window.EV||{},function(o){"use strict";function t(){void 0===f&&void 0===v||""===f&&""===v||(void 0!==f&&""!==f&&n("ev_sid")!=f&&(r("ev_sid",f,10),d("ev_sid",f,0,"localStorage"),p=p+"&ev_sid="+f),void 0!==v&&""!==v&&n("ev_did")!=v&&(r("ev_did",v,10),d("ev_did",v,0,"localStorage"),p=p+"&ev_did="+v))}function n(e){var o,t="; "+document.cookie,n=t.split("; "+e+"=");return 2==n.length?(o=n.pop().split(";").shift(),o=o.replace(/["'()]/g,"")):""}function r(e,o,t){if(!g.sidCookieDomain)throw new Error("Please specify sidCookieDomain in the config!",!0);var n=new Date;t=1460,n.setDate(n.getDate()+t),document.cookie=e+"="+escape(o)+(null===t?"":";expires="+n.toUTCString())+";path=/; domain="+g.sidCookieDomain,console.log(e+"="+escape(o)+(null===t?"":";expires="+n.toUTCString())+";path=/; domain="+g.sidCookieDomain)}function i(e){return""!==n(e)&&"undefined"!==n(e)?n(e):void 0}function s(e){return""!==l(e,"localStorage")&&"undefined"!==l(e,"localStorage")?l(e,"localStorage"):void 0}function a(){if(!g)throw"Evolok Metering library is not initialised!"}function l(e,o){var t=document.cookie.indexOf(e+"=");return"localStorage"==o?"undefined"!=typeof localStorage?(console.log(localStorage.getItem(e)),localStorage.getItem(e)):document.cookie.length>0&&t!==-1?getCookieSubstring(t,e):"":"sessionStorage"==o?"undefined"!=typeof sessionStorage?(console.log(sessionStorage.getItem(e)),sessionStorage.getItem(e)):(t=document.cookie.indexOf(e+"="),document.cookie.length>0&&t!==-1?getCookieSubstring(t,e):""):void 0}function d(e,o,t,n){var r=new Date;"localStorage"==n&&(r.setDate(r.getDate()+t),"undefined"!=typeof localStorage?localStorage.setItem(e,o):document.cookie=e+"="+escape(o)+(null===t?"":";expires="+r.toUTCString())),"sessionStorage"==n&&(r.setDate(r.getDate()+t),"undefined"!=typeof sessionStorage?sessionStorage.setItem(e,o):document.cookie=e+"="+escape(o)+(null===t?"":";expires="+r.toUTCString()))}function c(e){var o="";e=JSON.parse(e);for(var t in e)""!==o&&(o+="&"),o+=t+"="+encodeURIComponent(e[t]);return o}function u(e,o){a();var t=g.url;if(!t)throw new Error("Evolok Metering host url is not configured!");return t+="/"===t.charAt(t.length-1)&&"/"===e.charAt(0)?e.substring(1,e.length):e,t=o?t+"?"+o:t}var g,f,v,p,m;o.Em={init:function(e){if(!e.hasOwnProperty("url"))throw"Configuration must specify the url property!";g=e},authorize:function(e,t,a){o.Em.assert(e,"Parameters should not be empty!"),o.Em.assert(t,"Success callback should not be empty!"),o.Em.assert(a,"Error callback should not be empty!");var S=c(e),h="",_="",w="";p=S,i("ev_sid")?(_="&ev_sid="+n("ev_sid"),d("ev_sid",n("ev_sid"),0,"localStorage")):s("ev_sid")&&(g.hasOwnProperty("meterHD")?g.meterHD===!0&&(r("ev_sid",l("ev_sid","localStorage"),10),_="&ev_sid="+l("ev_sid","localStorage"),m=g.meterHD):r("ev_sid",l("ev_sid","localStorage"),10)),i("ev_did")?(w="&ev_did="+n("ev_did"),d("ev_did",n("ev_did"),0,"localStorage")):s("ev_did")&&(g.hasOwnProperty("meterHD")?g.meterHD===!0&&(r("ev_did",l("ev_did","localStorage"),10),w="&ev_did="+l("ev_did","localStorage")):r("ev_did",l("ev_did","localStorage"),10)),""!==n("ev_ss")&&(h+="&ev_ss="+n("ev_ss")),S=S+h+_+w;var y=u("/authorize/json",S),E=new XMLHttpRequest;E.open("GET",y,!0),E.withCredentials=!0,E.onload=function(){if(E.status>=200&&E.status<400){var e=JSON.parse(E.responseText);if("function"==typeof CustomEvent)var o=new CustomEvent("ev.ad.authorize",{detail:e});else{var o=document.createEvent("CustomEvent");o.initCustomEvent("ev.ad.authorize",!1,!1,e)}window.dispatchEvent(o),e.hasOwnProperty("sessionKeys")&&e.sessionKeys.hasOwnProperty("ev_sid")&&(f=e.sessionKeys.ev_sid),e.hasOwnProperty("sessionKeys")&&e.sessionKeys.hasOwnProperty("ev_did")&&(v=e.sessionKeys.ev_did),t(e)}else a&&a(E.status,E.responseText)},E.onerror=function(e){e?a(e):a(0,"unknown connection error")},E.send()},pretty_print:function(e){var t=JSON.stringify(e,null,3).replace(/&/g,"&amp;").replace(/\\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^( *)("[\w]+": )?("[^"]*"|[\w.+-]*)?([,[{])?$/gm,o.Em.replacer);return t="<pre>"+t+"</pre>"},replacer:function(e,o,t,n,r){var i=o||"";return t&&(i=i+"<span class=json-key>"+t.replace(/[": ]/g,"")+"</span>: "),n&&(i=i+('"'==n[0]?"<span class=json-string>":"<span class=json-value>")+n+"</span>"),i+(r||"")},get_cookie_local_storage:function(e){if("undefined"!=typeof localStorage)return console.log(localStorage.getItem(e)),localStorage.getItem(e);var o=document.cookie.indexOf(e+"=");return document.cookie.length>0&&o!==-1?getCookieSubstring(o,e):""},set_cookie_local_storage:function(e,o,t){var n=new Date;n.setDate(n.getDate()+t),"undefined"!=typeof localStorage?(alert("This place has local storage!"),localStorage.setItem(e,o)):document.cookie=e+"="+escape(o)+(null===t?"":";expires="+n.toUTCString())},segment:function(t,n,r){o.Em.assert(t,"Parameters should not be empty!"),o.Em.assert(n,"Success callback should not be empty!"),o.Em.assert(r,"Error callback should not be empty!");var i=c(t),s=u("/segment",i),a=new XMLHttpRequest;a.open("GET",s,!0),a.withCredentials=!0,a.onload=function(){if(a.status>=200&&a.status<400){var e=JSON.parse(a.responseText);n(e)}else r&&r(a.status,a.responseText)},a.onerror=function(){e?r(e):r(0,"unknown connection error")},a.send()},call_VerifyCookiesforSafari:function(){t()},get_Browser_Name:function(){var e="Unknown";return navigator.userAgent.indexOf("MSIE")!=-1?e="MSIE":navigator.userAgent.indexOf("Firefox")!=-1?e="Firefox":navigator.userAgent.indexOf("Opera")!=-1?e="Opera":navigator.userAgent.indexOf("Chrome")!=-1?e="Chrome":navigator.userAgent.indexOf("Safari")!=-1&&(e="Safari"),e},assert:function(e,o){if(!e){if(o=o||"Assertion failed","undefined"!=typeof Error)throw new Error(o);throw o}},getUrl:function(){return g.url}},function(){var e="Unknown";return navigator.userAgent.indexOf("MSIE")!=-1?e="MSIE":navigator.userAgent.indexOf("Firefox")!=-1?e="Firefox":navigator.userAgent.indexOf("Opera")!=-1?e="Opera":navigator.userAgent.indexOf("Chrome")!=-1?e="Chrome":navigator.userAgent.indexOf("Safari")!=-1&&(e="Safari"),e}(),setTimeout(function(){t()},4e3)}(window.EV),function(){if(!window.EV.Em)throw new Error("Couldn't find the Evolok Metering library in the browser context!")}();
